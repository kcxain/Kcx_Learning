<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-system/Software-Construction/Note2-设计规约">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">笔记2-设计规约(specification) | Star</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deconx.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://deconx.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://deconx.cn/system/Software-Construction/Note2-设计规约"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="笔记2-设计规约(specification) | Star"><meta data-rh="true" name="description" content="上一节，我们讲了编程语言中数据类型、变量、值的概念，尤其详细分析了这三者可变与不可变设计的区别，并导出不可变设计原则"><meta data-rh="true" property="og:description" content="上一节，我们讲了编程语言中数据类型、变量、值的概念，尤其详细分析了这三者可变与不可变设计的区别，并导出不可变设计原则"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://deconx.cn/system/Software-Construction/Note2-设计规约"><link data-rh="true" rel="alternate" href="https://deconx.cn/system/Software-Construction/Note2-设计规约" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://deconx.cn/system/Software-Construction/Note2-设计规约" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Star RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Star Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a22b4ae4.css">
<link rel="preload" href="/assets/js/runtime~main.031d51ea.js" as="script">
<link rel="preload" href="/assets/js/main.4354cf32.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.ico" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.ico" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Star</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/system">计算机基础</a><a class="navbar__item navbar__link" href="/code-daily">算法刷题</a><a class="navbar__item navbar__link" href="/ai">人工智能</a><a class="navbar__item navbar__link" href="/project">动手造轮子</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kcxain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">首页</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/system">计算机基础</a><button aria-label="打开/收起侧边栏菜单「计算机基础」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/system/CSAPP">CSAPP 实验解析</a><button aria-label="打开/收起侧边栏菜单「CSAPP 实验解析」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/system/Computer-Network">计算机网络</a><button aria-label="打开/收起侧边栏菜单「计算机网络」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/system/MIT6S081">MIT-6.s081 实验解析</a><button aria-label="打开/收起侧边栏菜单「MIT-6.s081 实验解析」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/system/Software-Construction">软件构造</a><button aria-label="打开/收起侧边栏菜单「软件构造」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note1-不可变设计原则">笔记1-不可变(immutable)设计原则</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/system/Software-Construction/Note2-设计规约">笔记2-设计规约(specification)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note3-抽象数据类型">笔记3-抽象数据类型(ADT)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note4-面向对象编程">笔记4-面向对象编程(OOP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note5-Equality-in-ADT-and-OOP">笔记5-Equality in ADT and OOP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note6-面向复用的软件构造技术">笔记6-面向复用(reuse)的软件构造技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note7-面向可维护性的软件构造技术">笔记7-面向可维护性的软件构造技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/Note8-详解七大设计模式">笔记8-详解七大设计模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/system/Software-Construction/二维凸包问题详解">二维凸包问题详解</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/code-daily">算法刷题</a><button aria-label="打开/收起侧边栏菜单「算法刷题」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ai">人工智能</a><button aria-label="打开/收起侧边栏菜单「人工智能」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/project">动手造轮子</a><button aria-label="打开/收起侧边栏菜单「动手造轮子」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/system"><span itemprop="name">计算机基础</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/system/Software-Construction"><span itemprop="name">软件构造</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">笔记2-设计规约(specification)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>笔记2-设计规约(specification)</h1><p>上一节，我们讲了编程语言中<strong>数据类型</strong>、<strong>变量</strong>、<strong>值</strong>的概念，尤其详细分析了这三者可变与不可变设计的区别，并导出<strong>不可变设计原则</strong></p><p>这一节，我们转向分析编程语言中的<strong>方法</strong>以及其对应的<strong>操作</strong>，并探究如何定义它们——<strong>规约(specification)</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="方法method">方法(method)<a href="#方法method" class="hash-link" aria-label="方法(method)的直接链接" title="方法(method)的直接链接">​</a></h2><p>Java 中的方法用于封装一段特定的逻辑功能</p><p>方法的主要要素有：</p><ul><li>权限修饰符 </li><li>方法名</li><li>参数列表</li><li>返回值</li></ul><p><strong>方法</strong>是程序的<strong>积木</strong>，可以被独立开发、测试、复用。但是使用<strong>方法</strong>的客户端，无需了解方法内部具体如何工作——<strong>抽象</strong></p><p>但是方法到底实现了什么样的操作，它的参数是什么？返回值是什么？</p><p>显然需要一些规则来设定</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要使用规约">为什么要使用规约<a href="#为什么要使用规约" class="hash-link" aria-label="为什么要使用规约的直接链接" title="为什么要使用规约的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="对于使用者">对于使用者<a href="#对于使用者" class="hash-link" aria-label="对于使用者的直接链接" title="对于使用者的直接链接">​</a></h3><ul><li>规约使得使用者不必去阅读源码</li><li>规约可以看作实现者与使用者之间的契约，使用者对方法的使用要依赖于规约</li></ul><p>以 Java API 文档中<code>BigInteger</code>中<code>add</code>方法的规约为例：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BigInteger</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Returns</span><span class="token plain"> a </span><span class="token class-name">BigInteger</span><span class="token plain"> whose value is </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Parameters</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> value </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">be</span><span class="token plain"> added </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name"></span><br></span><span class="token-line" style="color:#393A34"><span class="token class-name" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token class-name">Returns</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Java 8 中对应的源码为：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">signum </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">signum </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">signum </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> signum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> signum</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cmp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">compareMagnitude</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmp </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ZERO</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> resultMag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cmp </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">subtract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">subtract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resultMag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">trustedStripLeadingZeroInts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resultMag</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BigInteger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resultMag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cmp </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> signum </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看到，通过阅读<code>BigInteger.add</code>的规约，使用者可以直接了解如何使用<code>BigInteger.add</code>，以及它的行为属性。而如果看源码的话，就不得不看<code>BigInteger</code>的构造体、<code>compareMagnitude</code>、<code>subtract</code>以及<code>trustedStripLeadingZeroInts</code>的实现</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="对于实现者">对于实现者<a href="#对于实现者" class="hash-link" aria-label="对于实现者的直接链接" title="对于实现者的直接链接">​</a></h3><ul><li>没有规约就无法分派任务，无法写程序，即使写出来也不知道对错</li><li>没有规约，不同开发者的理解可能不同，整个项目容易出现错误，出现的bug也难以定位</li><li>精确的规约，有助于不同的实现者区分责任</li></ul><p>另外</p><ul><li>规约给了实现者更改实现策略而不告诉使用者的自由</li><li>规约可以提高编码效率，它可以限定一些特殊的输入，这样实现者就可以省略一些检查和边界处理，代码可以运行地更快</li></ul><p>规约扮演着<strong>防火墙</strong>的角色，如图：</p><p><img loading="lazy" src="/assets/images/fff057c018bb41981136fa66d814916b720w-b3537cceb8f733a797e452888debc56a.webp" width="966" height="551" class="img_ev3q"></p><p>规约就好像一道防火墙，将使用者和实现者隔离开。使用者不必知道方法是如何运行的，而实现者也无需考虑这个方法会如何被使用</p><p>这种隔离造成了<strong>解耦(decoupling)</strong>：使用者自己的代码和实现者的代码可以独立发生改动，只要双方都遵循规约</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="行为等价性behavioral-equivalence">行为等价性(Behavioral equivalence)<a href="#行为等价性behavioral-equivalence" class="hash-link" aria-label="行为等价性(Behavioral equivalence)的直接链接" title="行为等价性(Behavioral equivalence)的直接链接">​</a></h2><p>考虑如下方法：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个方法用来在整数数组中查找某个数的索引。</p><p>对于我们使用者来说，可以看到该方法时从数组开头开始查找的，对于某些大型数组来说速度会非常慢，那么可不可以改进一下，从数组的两头同时查找呢？于是写出如下代码：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">j</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这两个方法的行为显然不同，但是对于使用者来说，它们是不是等价的呢？考虑如下规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> val occurs exactly once in arr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> returns index i such that arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于这个规约来说，这两个方法显然都符合，故它们等价</p><p>总之：</p><ul><li>单纯地看实现代码，并不足以判定不同的方法实现是否行为等价</li><li>需要根据代码的规约来判定</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规约的结构">规约的结构<a href="#规约的结构" class="hash-link" aria-label="规约的结构的直接链接" title="规约的结构的直接链接">​</a></h2><p>一个规约需要含有以下两条：</p><ul><li>前置条件：对使用者的约束，在使用方法时必须满足的条件，关键词是<code>requires</code></li><li>后置条件：对实现者的约束，方法结束时必须满足的条件，关键词是<code>effects</code></li><li>异常行为：如果违反了前置条件，方法会做什么？</li></ul><p>前置条件确保了调用方法所处的状态，例如：</p><ul><li>限定参数 (e.g. <code>x &gt;= 0</code> to say that an <code>int</code> parameter x must actually be a nonnegative <code>int</code>)</li><li>限定参数间的相互作用 (e.g. <code>val</code> occurs exactly once in <code>arr</code>)</li></ul><p><img loading="lazy" src="/assets/images/v2-cba06dbd69e09d8ec0ef0f5ce133a9cd_720w-114fd17354dc81802f29e21ff283a3d5.webp" width="844" height="481" class="img_ev3q"></p><p>后置条件包括 Java 可以静态检查的部分，返回值的类型以及异常检查，这些都写在<code>effects</code>关键词后面，包括：</p><ul><li>返回值与输入的关系</li><li>在何时抛出什么异常</li><li>对象是否可变</li></ul><p>前置条件和后置条件是一个逻辑蕴涵的关系：</p><ul><li>如果前置条件满足，则后置条件一定满足</li><li>如果前置条件不满足，则方法的行为不受后置条件的约束，可能引发任何行为，包括永不返回、抛出异常、返回任意结果等</li></ul><p><img loading="lazy" src="/assets/images/v2-050ccbc4cdb86e89c6396b27ec606ed0_720w-cb146fe9bf904dcb10b6ccdb879c23b6.webp" width="726" height="425" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java中的规约">Java中的规约<a href="#java中的规约" class="hash-link" aria-label="Java中的规约的直接链接" title="Java中的规约的直接链接">​</a></h2><p>有些语言将前置条件和后置条件作为语言的基本部分，运行时，编译器可以自动检查表达式，以强制执行归于</p><p>Java 的静态类型声明是前置条件和后置条件的一部分，编译器会自动检查和强制执行这一部分，但是其它条件就需要在方法之前的注释中进行描述，只能靠人工遵守</p><p>Java 对方法前有关规约的注释的约定叫做 Javadoc，其中参数由<code>@param</code>子句描述，结果由<code>@return</code>子句描述，因为，应该将前置条件放入<code>@param</code>，后置条件放入<code>@return</code>。</p><p>像这样的规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> val occurs exactly once in arr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> returns index i such that arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 Java 中是这样的：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Find a value in an array.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param arr array to search, requires that val occurs exactly once</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *            in arr</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param val value to search for</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return index i such that arr[i] = val</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规约怎么写">规约怎么写？<a href="#规约怎么写" class="hash-link" aria-label="规约怎么写？的直接链接" title="规约怎么写？的直接链接">​</a></h2><p>一个规约应该说明方法的参数和返回值，但是它不应该提及局部变量或者私有的内部方法或数据，这些内部的实现都应该在规约中对读者隐瞒</p><p><img loading="lazy" src="/assets/images/v2-78b283f89c2416a1a20ce4c7b3ff4ae5_720w-6f2cbd60ff2f4ab2d83f8e9bc46d88f7.webp" width="720" height="417" class="img_ev3q"></p><p>举例：</p><ol><li><p>改变参数的方法规约：</p><p><img loading="lazy" src="/assets/images/v2-e2102eb572d314c25672591b1f4b548a_720w-b4478e5fc2c6a068875a0c3a0e87e440.webp" width="720" height="105" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/v2-03047beb1ef5da9cc786bae8f19ce4bd_720w-5913e66c86d423da316517aca14e4cc0.webp" width="774" height="136" class="img_ev3q"></p></li><li><p>不改变参数的方法规约：</p><p><img loading="lazy" src="/assets/images/v2-17c1d5dd81893ffc929efce168152237_720w-d9d0410908565db7d27fed9edbcc3afa.webp" width="885" height="101" class="img_ev3q"></p></li></ol><p><strong>注意</strong>：除非在后置条件里声明过，否则方法内部不应该改变输入参数</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试与规约">测试与规约<a href="#测试与规约" class="hash-link" aria-label="测试与规约的直接链接" title="测试与规约的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="黑盒测试">黑盒测试<a href="#黑盒测试" class="hash-link" aria-label="黑盒测试的直接链接" title="黑盒测试的直接链接">​</a></h3><p>黑盒测试是指仅仅依赖于规约构建的测试，不考虑实现。</p><p>例如，测试方法<code>find</code>，它的规约如下：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val occurs in arr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns index i such that arr</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个规约明确了前置条件：<code>val</code>必须在<code>arr</code>中存在</p><p>而它的后置条件很弱：如果<code>arr</code>中有多个<code>val</code>，并不知道会返回哪一个索引</p><p>比如，如下的测试就不是一个好的测试：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> array </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">assertEquals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// bad test case: violates the spec</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="设计规约">设计规约<a href="#设计规约" class="hash-link" aria-label="设计规约的直接链接" title="设计规约的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="规约的强弱">规约的强弱<a href="#规约的强弱" class="hash-link" aria-label="规约的强弱的直接链接" title="规约的强弱的直接链接">​</a></h3><p>假设我们现在想要改变一个方法，并且这个方法已经被广泛使用了，那么我们怎么个确定修改后的新的规约可以安全地替换原来的规约呢？</p><p>定义：规约<code>S2</code>不弱于<code>S1</code>仅当</p><ul><li><code>S2</code>的前置条件弱于或等价于<code>S1</code>的</li><li><code>S2</code>的后置条件弱于或等价于<code>S1</code>的</li></ul><p>如果<code>S2</code>强于<code>S1</code>，那么任何<code>S2</code>的实现方法都可以拿来实现<code>S1</code>，并且在程序中可以安全地用<code>S2</code>的模块替换<code>S1</code>的模块</p><p>说白了，就是一种思想：可以弱化前置条件（减少使用者的限制），也可以强化后置条件</p><p>例如，对于<code>find</code>的规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findExactlyOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val occurs exactly once in a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns index i such that a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以弱化它的前置条件，替换为：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> findOneOrMore</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">AnyIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val occurs at least once in a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns index i such that a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以继续强化它的后置条件，替换为：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> findOneOrMore</span><span class="token punctuation" style="color:#393A34">,</span><span class="token class-name">FirstIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val occurs at least once in a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns lowest index i such that a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>而假设替换为如下的规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findCanBeMissing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns index i such that a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> or </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> no such i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果将它与<code>findOneOrMore</code>和<code>FirstIndex</code>比较，它的前置条件更弱，但是它的后置条件也更弱，所以它们是无法比较强弱的</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="图示化规约">图示化规约<a href="#图示化规约" class="hash-link" aria-label="图示化规约的直接链接" title="图示化规约的直接链接">​</a></h3><p>将全部方法作为一个集合，我们可以把上面提到的<code>findFirst</code>和<code>findLast</code>画出来，用点来表示实际的方法：</p><p><img loading="lazy" src="data:image/webp;base64,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" width="456" height="252" class="img_ev3q"></p><p>而一个规约会在这个集合中画出一个范围，这个范围内的素有方法都满足规约要求，而在范围之外的不满足规约要求</p><p><img loading="lazy" src="/assets/images/v2-922e02bf375baa8784d08d46191d6cc3_720w-cad0c7e4a0e5b1369fc89888a0f29803.webp" width="450" height="252" class="img_ev3q"></p><p>规约划定了区域：</p><ul><li>实现者可以自由地在这个区域选择任意一点（即改变实现方案），而不必担心这种改变会影响使用者</li><li>使用者只需要选取某一个区域，而不必在意到底是区域中哪一个点（具体实现方法）</li></ul><p>那么如何用图示描述两个规约的强弱呢？</p><ul><li>先从加强<strong>后置条件</strong>考虑，如果<code>S2</code>的后置条件强于<code>S1</code>的后置条件，那么<code>S2</code>就是强于<code>S1</code>的。而强化后置条件最实现者来说，意味着更小的自由度，所以之前在该规约确定的范围内的一些方法可能就会在范围外了</li><li>再考虑<strong>弱化前置</strong>条件，如果弱化了强制条件，那么实现者就需要处理更多的可能的输入，那么也会使之前在该规约确定的范围内的一些方法剔除出去</li></ul><p>简而言之，更强的规约表达为更小的区域</p><p><img loading="lazy" src="/assets/images/v2-874dfb63d068e4484f2bf8c5b309f966_720w-17479c1560934d928c8f81f97f3f443c.webp" width="569" height="316" class="img_ev3q"></p><p>而对于两个无法比较强弱的规约，它们的范围既有可能重叠也有可能不重叠，无法比较。</p><p>比如上面提到的规约<code>CanBeMissing</code></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">findCanBeMissing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nothing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  returns index i such that a</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> or </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> no such i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>它就无法和规约<code>OneOrMore,FirstIndex</code>比较</p><p><img loading="lazy" src="/assets/images/v2-7a26ec6615373b1f7b03a3ad438f753f_720w-f0d361e0725bdc60c0158c10ae79c961.webp" width="377" height="191" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="设计原则">设计原则<a href="#设计原则" class="hash-link" aria-label="设计原则的直接链接" title="设计原则的直接链接">​</a></h3><p>一个好的规约应该简洁清楚、结构明确、易于理解。下面有一些原则：</p><ol><li><p>规约应内聚(coherent)</p><p>规约描述的功能应单一、简单、易于理解，考虑如下规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sumFind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">returns the sum of all indices in arrays a and b at which val appears</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个设计并不合理，因为它将两个毫不相干的事情放在一起完成（在两个数组里面查找并将下标相加）</p><p>好的设计应将这个方法分成两个方法：一个在数组中查找下标，另一个将两数相加然后输出结果</p><p>分成两个不同的方法不仅会更易于理解，也会提高方法的可复用性</p></li><li><p>结果应清晰</p><p>考虑下面的规约，它将一个值放在一个<code>map</code>中：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">V</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">K</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">V</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">requires</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  val may be </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> and map may contain </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  inserts </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> into the mapping</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> overriding any existing mapping </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> and returns old value </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unless none</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> in which </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> it returns </span><span class="token keyword" style="color:#00009f">null</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意到前置条件并没有规定<code>key</code>对应的值不能是<code>null</code>。但是后置条件将<code>null</code>作为一个特殊条件来返回。这意味着如果返回值是<code>null</code>，那么使用者就不能判断到底是<code>key</code>对应的值是<code>null</code>还是<code>key</code>以前就不存在。因此，这不是一个好的设计，它会产生歧义</p></li><li><p>后置条件应足够强</p><p>规约当然需要保证对于满足前置条件的调用，它会满足要求，但是这里主要说的是对一些前置条件之外的特殊情况的处理</p><p>例如，对一个错误的输入，抛出异常并且允许任意的更改是毫无意义的。因为使用者无法确定模块在抛出异常前对对象做了哪些更改，例如下面的规约：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">T</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> list1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">T</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> list2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adds the elements of list2 </span><span class="token keyword" style="color:#00009f">to</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">list1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unless it encounters a </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> at which point it </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> a </span><span class="token class-name">NullPointerException</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果异常 <code>NullPointerException</code> 被抛出，使用者就得想方设法找到是<code>list2</code>中的哪一个<code>null</code>元素导致了异常的发生以及<code>list1</code>又被做了哪些改变。</p></li><li><p>前置条件应足够弱</p><p>思考下面的规约，这个方法尝试打开一个文件：</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> filename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">opens</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">a</span><span class="token plain"> file named filename</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个规约设计的很不好</p><ul><li>它缺少很多重要的细节：文件打开后是用来都还是写？文件已经存在了还是这个方法来创建</li><li>因为前置条件太弱，所以这个规约太强了</li></ul><p>太强的规约对于使用者来说非常舒服，但对于开发者来说，大大增加了实现的难度</p></li><li><p>应使用抽象数据类型(abstract types)</p><p>在规约中使用抽象数据类型会给使用者和实现者更多的自由。在 Java 中，通常使用接口如 <code>Map</code> 或 <code>Reader</code> 而不是具体的实现类如 <code>HashMap</code> 或 <code>FileReader</code> 。考虑下面的规约</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">T</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reverse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">T</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">effects</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">returns a </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> list which is the reversal of list</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> newList</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> all </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> ≤ i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> where n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个规格说明强制使用者传入一个 <code>ArrayList</code> ，并且强制实现者返回一个 <code>ArrayList</code> ，而<code>List</code>实现方法有很多种。从描述上看，对应模块的行为应该不会依赖于 <code>ArrayList</code>的实现特性，所以这里最好写成更抽象的数据类型<code>List</code> </p></li><li><p>考虑是否使用前置条件</p><p>使用者并不喜欢太强的前置条件，所以是否使用前置条件的衡量标准在于检查参数合法性的代价有多大</p><p>例如，我们想用二分查找的办法实现<code>find</code> ，我们会要求这个数组是已经排序过的了。如果强制要求模块检查这个数组是否已经排好序，这个带来的复杂度的增加相对于我们要实现的目标是承受不起的</p><p>关于是否使用前置条件是一个工程上的判断。关键点在于检查参数耗费的资源量以及这个模块被使用的范围。当这个方法是类的私有方法(private)时，我们可以设置前置条件，仔细检查所有的调用是否合理。但是如果这个方法是公开的，并且会被其他的开发者使用，那么使用前置条件就不那么合理</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2><p>本文从为什么需要规约以及如何设计规约进行了细致的讨论，并且举了大量反例来说明有些规约为什么不好，下面还是从三方面考虑规约的好处：</p><ul><li>Safe from bugs. 如果没有规约，即使是最小的更改都有可能使得整个程序崩溃，改动起来也是很麻烦的。一个结构良好、逻辑明确的规约会最小化使用者和实现者之间的误解，并帮助我们进行静态检查、测试、代码评审等等</li><li>Easy to understand. 一个好的规约会让使用者不必去阅读源码也能正确安全地使用</li><li>Ready for change. 一个合理的较弱的规约会给实现者一定的自由，而一个较强的规约会给实现者一定的自由。我们也可以通过加强规约来轻易地改动模块</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kcxain/Kcx_Learning/tree/master/docs/system/Software-Construction/Note2-设计规约.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/system/Software-Construction/Note1-不可变设计原则"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">笔记1-不可变(immutable)设计原则</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/system/Software-Construction/Note3-抽象数据类型"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">笔记3-抽象数据类型(ADT)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#方法method" class="table-of-contents__link toc-highlight">方法(method)</a></li><li><a href="#为什么要使用规约" class="table-of-contents__link toc-highlight">为什么要使用规约</a><ul><li><a href="#对于使用者" class="table-of-contents__link toc-highlight">对于使用者</a></li><li><a href="#对于实现者" class="table-of-contents__link toc-highlight">对于实现者</a></li></ul></li><li><a href="#行为等价性behavioral-equivalence" class="table-of-contents__link toc-highlight">行为等价性(Behavioral equivalence)</a></li><li><a href="#规约的结构" class="table-of-contents__link toc-highlight">规约的结构</a></li><li><a href="#java中的规约" class="table-of-contents__link toc-highlight">Java中的规约</a></li><li><a href="#规约怎么写" class="table-of-contents__link toc-highlight">规约怎么写？</a></li><li><a href="#测试与规约" class="table-of-contents__link toc-highlight">测试与规约</a><ul><li><a href="#黑盒测试" class="table-of-contents__link toc-highlight">黑盒测试</a></li></ul></li><li><a href="#设计规约" class="table-of-contents__link toc-highlight">设计规约</a><ul><li><a href="#规约的强弱" class="table-of-contents__link toc-highlight">规约的强弱</a></li><li><a href="#图示化规约" class="table-of-contents__link toc-highlight">图示化规约</a></li><li><a href="#设计原则" class="table-of-contents__link toc-highlight">设计原则</a></li></ul></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">联系我</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kcxain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.zhihu.com/people/deconx" target="_blank" rel="noopener noreferrer" class="footer__link-item">知乎<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/kecxain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 CS-Notes, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.031d51ea.js"></script>
<script src="/assets/js/main.4354cf32.js"></script>
</body>
</html>