<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-system/database/note10">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Note10-并发控制 | Kcxain&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://deconx.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://deconx.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://deconx.cn/docs/system/database/note10"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Note10-并发控制 | Kcxain&#x27;s Blog"><meta data-rh="true" name="description" content="事务"><meta data-rh="true" property="og:description" content="事务"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://deconx.cn/docs/system/database/note10"><link data-rh="true" rel="alternate" href="https://deconx.cn/docs/system/database/note10" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://deconx.cn/docs/system/database/note10" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WBXP35154X-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kcxain&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kcxain&#39;s Blog Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kcxain&#39;s Blog" href="/opensearch.xml">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.063dca82.css">
<link rel="preload" href="/assets/js/runtime~main.6e179c2f.js" as="script">
<link rel="preload" href="/assets/js/main.922c6ae7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">潜龙勿用</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">笔记</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/blog">博客</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/blog/archive">归档</a></li><li><a class="dropdown__link" href="/blog/tags">标签</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">更多</a><ul class="dropdown__menu"><li><a href="https://kcxain.notion.site/47ce59bd0b5c4ad4b52e3c3e5edcbf1d?v=df363f664ffe493093f511e82d906c82" target="_blank" rel="noopener noreferrer" class="dropdown__link">读论文<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://kcxain.notion.site/Schedule-97f4f2fd23e94349892d398c7b43bcd1" target="_blank" rel="noopener noreferrer" class="dropdown__link">计划复盘<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/about-me">关于我</a><a href="https://github.com/kcxain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>潜龙勿用</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">总览</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/system">计算机基础</a><button aria-label="打开/收起侧边栏菜单「计算机基础」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/system/CSAPP">深入理解计算机系统</a><button aria-label="打开/收起侧边栏菜单「深入理解计算机系统」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/system/os">操作系统</a><button aria-label="打开/收起侧边栏菜单「操作系统」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/system/Computer-Network">计算机网络</a><button aria-label="打开/收起侧边栏菜单「计算机网络」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/system/Compilers">编译原理</a><button aria-label="打开/收起侧边栏菜单「编译原理」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/system/database">数据库系统</a><button aria-label="打开/收起侧边栏菜单「数据库系统」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note1">Note01-关系模型与形式化查询语言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note2">Note02-结构化查询语言SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note3">Note03-概念数据库设计和E-R模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note4">Note04-关系数据库设计</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note5">Note05-存储和文件结构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note6">Note06-Hash索引详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note7">Note07-B+树索引详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note8">Note08-查询处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note9">Note09-查询优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/system/database/note10">Note10-并发控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/system/database/note11">Note11-恢复系统</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/system/Software-Construction">软件构造</a><button aria-label="打开/收起侧边栏菜单「软件构造」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/code-daily">算法刷题</a><button aria-label="打开/收起侧边栏菜单「算法刷题」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/ai">人工智能</a><button aria-label="打开/收起侧边栏菜单「人工智能」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/project">动手造轮子</a><button aria-label="打开/收起侧边栏菜单「动手造轮子」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/system"><span itemprop="name">计算机基础</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/system/database"><span itemprop="name">数据库系统</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Note10-并发控制</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Note10-并发控制</h1><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="事务">事务<a href="#事务" class="hash-link" aria-label="事务的直接链接" title="事务的直接链接">​</a></h2><p>事务是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。</p><p>事务的特性：</p><ul><li>原子性：即事务完全执行或完全不执行</li><li>一致性：事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态</li><li>隔离性：表面看起来，每个事务都是在没有其它事务同时执行的情况下执行的</li><li>持久性：一个事务一旦提交，它对数据库中数据的改变就应该是永久性的</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="并发执行和调度">并发执行和调度<a href="#并发执行和调度" class="hash-link" aria-label="并发执行和调度的直接链接" title="并发执行和调度的直接链接">​</a></h2><p>调度就是一个或多个事务的重要操作按时间排序的一个序列。如果不管数据库初始状态如何，一个调度对数据库状态的影响都和某个串行调度相同，则我们说这个调度是可串行化的。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="优先关系">优先关系<a href="#优先关系" class="hash-link" aria-label="优先关系的直接链接" title="优先关系的直接链接">​</a></h3><p>已知调度 S，其中涉及事务 T1 和 T2，可能还有其他事务。我们说 T1 优先于 T2，记作 T1 &lt; T2，如果有 T1 的动作 A1 和 T2 的动作 A2，满足：</p><ul><li>在 S 中 A1 在 A2 前</li><li>A1 和 A2 都涉及同一数据库元素，并且 A1 和 A2 中至少有一个动作是写</li></ul><p>因此，在任何冲突等价于 S 的调度中，A1 将出现在 A2 前。所以，如果这些调度中有一个是串行调度，那么该调度必然使 T1 在 T2 前。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="优先图">优先图<a href="#优先图" class="hash-link" aria-label="优先图的直接链接" title="优先图的直接链接">​</a></h3><p>优先图的结点是调度 S 中的事务。当这些事务是具有不同的 i 的 Ti 时，我们将仅用整数 i 来表示 Ti 的结点。如果 Ti &lt; Tj，则有一条从结点 i 到结点 j 的弧。</p><p>如，假设有一个事务序列为：r2(A); r1(B); w2(A); r3(A); w1(B); w3(A); r2(B); w2(B);</p><p>事务 T1 不对 A 操作，而它最先对 B 操作，显然 T1 优先级最高，调度图如下：</p><p><img loading="lazy" src="data:image/png;base64,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" width="430" height="127" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="冲突可串行性判定">冲突可串行性判定<a href="#冲突可串行性判定" class="hash-link" aria-label="冲突可串行性判定的直接链接" title="冲突可串行性判定的直接链接">​</a></h3><p>就是看优先图中有没有环。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="并发控制协议">并发控制协议<a href="#并发控制协议" class="hash-link" aria-label="并发控制协议的直接链接" title="并发控制协议的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="基于锁的协议">基于锁的协议<a href="#基于锁的协议" class="hash-link" aria-label="基于锁的协议的直接链接" title="基于锁的协议的直接链接">​</a></h3><p>锁是数据项上的并发控制标志。锁可以分为两种类型：</p><ul><li>共享锁。如果事务 T 得到了数据项 Q 上的共享锁，则 T 可以读这个数据项，但不能写这个数据项。共享锁表示为 S</li><li>互斥锁。如果事务 T 得到了数据项 Q 上的互斥锁，则 T 既可以都这个数据项，也可以写这个数据项。互斥锁表示为 X</li></ul><p>给定一个各种类型锁的集合，如下定义这个锁集合上的相容关系：</p><ul><li>令 A 和 B 表示任意类型的锁。设事务 Ti 在数据项 Q 要求一个 A 型锁，事务 Tj 已经在 Q 上有一个 B 型锁。如果事务 Ti 能够获得 Q 上的 A 型锁，则说明 A 型锁和 B 型锁是相容的。</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="死锁">死锁<a href="#死锁" class="hash-link" aria-label="死锁的直接链接" title="死锁的直接链接">​</a></h4><p>产生死锁的原因是两个或多个事务都已封锁了一些数据对象，然后又都请求对已为其他事务封锁的数据对象加锁，从而出现死等待。</p><p>如何预防死锁呢？</p><ul><li>一次封锁法。要求每个事务必须一次将所有要使用的数据全部加锁<ul><li>降低系统并发度，且难于事先精确确定封锁对象</li></ul></li><li>顺序封锁法。预先对数据对象规定一个封锁顺序，所有事务都按这个顺序实行封锁。<ul><li>事务的封锁请求可以随着事务的执行而动态地决定，很难事先确定每一个事务要封锁哪些对象，因此也就很难按照规定地顺序去施加封锁</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="等待图">等待图<a href="#等待图" class="hash-link" aria-label="等待图的直接链接" title="等待图的直接链接">​</a></h4><p>事务等待图是一个有向图，结点表示正运行地事务，每条边表示事务地等待情况，若 T1 等待 T2，则 T1,    T2 之间划一条有向边</p><p>并发控制子系统周期性地生成等待图。如果发现图中存在回路，则表示系统中出现了死锁。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="死锁的恢复">死锁的恢复<a href="#死锁的恢复" class="hash-link" aria-label="死锁的恢复的直接链接" title="死锁的恢复的直接链接">​</a></h4><ul><li>选择牺牲者：必须决定回滚哪一个事务以打破死锁，应使事务回滚代价最小<ul><li>事务已计算了多久，还将计算多长时间</li><li>该事务已使用了多少数据项</li><li>为完成事务还需使用多少数据项</li><li>回滚使将牵扯多少事务</li></ul></li><li>饿死<ul><li>有可能同一事务总是被选为牺牲者，发生饿死</li><li>因而必须保证一个事务被选为牺牲者的次数有限</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="两段锁协议">两段锁协议<a href="#两段锁协议" class="hash-link" aria-label="两段锁协议的直接链接" title="两段锁协议的直接链接">​</a></h4><p>两阶段锁协议要求每个事务分两个阶段进行数据项的加锁和解锁，每个事务中所有封锁请求先于任何一个解锁请求。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="基于时间戳的协议">基于时间戳的协议<a href="#基于时间戳的协议" class="hash-link" aria-label="基于时间戳的协议的直接链接" title="基于时间戳的协议的直接链接">​</a></h3><p>另一种决定事务可串行化次序的方法是事先选定事务的次序，最常见的方法是时间戳排序机制。</p><p>对于系统中每个事务 Ti，我们把一个唯一的固定时间戳和它联系起来，记为 TS(Ti)，如有一新事物 Tj 进入系统，则 TS(Ti) &lt; TS(Tj)</p><p>每个数据项 Q 需要与两个时间戳值关联</p><ul><li>W-timestamp(Q)：表示成功执行 write(Q) 的所有事务的最大时间戳</li><li>R-timestamp(Q)：表示成功执行 read(Q) 的所有事务的最大时间戳</li></ul><p>时间戳协议</p><ul><li>假设事务Ti发出read(Q)<ul><li>若 TS(Ti) &lt; W-timestamp(Q)，则 Ti 需要读入的 Q 值已被覆盖。因此 read 操作被拒绝，Ti回滚</li><li>若 TS(Ti) &gt;= W-timestamp(Q)，则执行 read 操作，Rtimestamp(Q) 被设置为 max(TS(Ti), R-timestamp(Q))</li></ul></li><li>假设事务 Ti 发出 write(Q)<ul><li>若 TS(Ti) &lt; R-timestamp(Q)，则 Ti 产生的 Q 值是是先前所需要的值，且系统已假定该值不会产生。因此拒绝，Ti 回滚</li><li>若 TS(Ti) &lt; W-timestamp(Q)，则 Ti 试图写入的 Q 值已过时。拒绝，Ti 回滚</li><li>其他情况，则执行，且 W-timestamp(Q) 被设置为 TS(Ti)</li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="thomas写规则">Thomas写规则<a href="#thomas写规则" class="hash-link" aria-label="Thomas写规则的直接链接" title="Thomas写规则的直接链接">​</a></h4><ul><li>假设事务 Ti 发出 read(Q)，处理方法与时间戳排序协议相同</li><li>假设事务 Ti 发出 write(Q)<ul><li>若 TS(Ti) &lt; R-timestamp(Q)，则 Ti 产生的 Q 值是先前所需要的值，且系统已假定该值不会产生。因此 write 操作被拒绝，Ti 回滚</li><li>若 TS(Ti) &lt; W-timestamp(Q)，则 Ti 试图写入的 Q 值已过时。因此这个 write 操作可忽略。</li><li>其他情况，则执行 write 操作，W-timestamp(Q) 被设置为 TS(Ti )</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kcxain/Kcx_Learning/tree/master/docs/system/database/Note10-并发控制.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/system/database/note9"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Note09-查询优化</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/system/database/note11"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Note11-恢复系统</div></a></nav></div><div style="padding-top:50px"></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#事务" class="table-of-contents__link toc-highlight">事务</a></li><li><a href="#并发执行和调度" class="table-of-contents__link toc-highlight">并发执行和调度</a><ul><li><a href="#优先关系" class="table-of-contents__link toc-highlight">优先关系</a></li><li><a href="#优先图" class="table-of-contents__link toc-highlight">优先图</a></li><li><a href="#冲突可串行性判定" class="table-of-contents__link toc-highlight">冲突可串行性判定</a></li></ul></li><li><a href="#并发控制协议" class="table-of-contents__link toc-highlight">并发控制协议</a><ul><li><a href="#基于锁的协议" class="table-of-contents__link toc-highlight">基于锁的协议</a></li><li><a href="#基于时间戳的协议" class="table-of-contents__link toc-highlight">基于时间戳的协议</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Kcxain. Built with Docusaurus.</div><div id="contact-me" style="display:flex;justify-content:center"><a href="mailto:kcxain@gmail.com" class="linkicon_PO4W"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:36px"><path fill="currentColor" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg></a><a href="https://www.zhihu.com/people/deconx" class="linkicon_PO4W"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="zhihu" class="svg-inline--fa fa-zhihu" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" style="font-size:36px"><path fill="currentColor" d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z"></path></svg></a><a href="https://twitter.com/kecxain" class="linkicon_PO4W"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="font-size:36px"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://github.com/kcxain" class="linkicon_PO4W"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-alt" class="svg-inline--fa fa-github-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512" style="font-size:36px"><path fill="currentColor" d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg></a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.6e179c2f.js"></script>
<script src="/assets/js/main.922c6ae7.js"></script>
</body>
</html>